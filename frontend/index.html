<!DOCTYPE html>
<html>
    <head>
        <!-- Load Leaflet for the map. -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
            integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
            crossorigin="" />
        <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
            integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
            crossorigin=""></script>

        <link rel="stylesheet" href="./style.css" />
        <link rel="icon" type="image/png" href="./assets/favicon.png">
        <link rel="icon" type="image/svg+xml" href="./assets/favicon.svg">
        <script src="./dynamic.js.php"></script>
        <title>Hauk</title>

        <!-- The page should not be scalable, since users can just zoom in on
             the map itself directly. -->
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    </head>
    <body>
        <div id="mapouter">
            <!-- The container for the Leaflet map. -->
            <div id="map"></div>

            <!-- A countdown timer in a notch at the top of the screen. -->
            <div id="notch">
                <div class="tri t-left"></div>
                <div class="inner" id="countdown"></div>
                <div class="inner hidden offline">Offline</div>
                <div class="tri t-right"></div>
            </div>

            <!-- The Hauk logo is displayed in the bottom left or right corner,
                 depending on screen resolution. -->
            <a href="https://github.com/bilde2910/Hauk">
                <div id="logo">
                    <div></div>
                </div>
            </a>
        </div>

        <!-- JavaScript is required for Leaflet and AJAX requests to the local
             Hauk API. Inform the user if JavaScript is disabled. -->
        <noscript>
            <div class="cover">
                <img src="./assets/logo.svg">
                <p class="header">JavaScript disabled</p>
                <p class="body">Hauk fundamentally requires JavaScript to function. Please enable JavaScript and reload the page to view the Hauk map.</p>
            </div>
        </noscript>

        <div class="cover hidden" id="notfound">
            <img src="./assets/logo.svg" class="logo">
            <p class="header">Location expired</p>
            <p class="body">The shared location you tried to access was not found on the server. If this link worked before, the share might have expired.</p>
        </div>

        <div class="cover hidden" id="searching">
            <img src="./assets/location-pending.svg" class="pending">
            <p class="header" style="margin-top:0;">Please wait</p>
            <p class="body">Sender is waiting for GPS signal</p>
        </div>

        <div class="cover hidden" id="index">
            <img src="./assets/logo.svg" class="logo">
            <p class="body" style="margin-top:7vmin;">Point the Hauk app to this server to share your location:</p>
            <p class="body" id="url">https://localhost/</p>
            <p class="body"><a href="https://f-droid.org/packages/info.varden.hauk">
                <img src="https://fdroid.gitlab.io/artwork/badge/get-it-on.png"
                alt="Get it on F-Droid"
                class="f-droid">
            </a></p>
        </div>

        <div id="expired" class="dialog hidden">
            <div>
                <p class="header">Share expired</p>
                <p class="body">This location share has expired.</p>
                <p class="button"><input type="button" id="dismiss-expired" value="Dismiss"></p>
            </div>
        </div>

        <div id="offline" class="dialog hidden">
            <div>
                <p class="header">Connection error</p>
                <p class="body">Connection to the Hauk server was lost. Hauk will try to reconnect in the background. Please check that you have network connectivity.</p>
                <p class="button"><input type="button" id="dismiss-offline" value="Dismiss"></p>
            </div>
        </div>

        <script src="./main.js"></script>
    </body>
</html>
